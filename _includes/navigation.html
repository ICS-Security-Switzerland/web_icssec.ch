
{% assign lang = page.lang | default: 'en' %}
{% case lang %}
  {% when 'de' %}
    {% assign prefix = '/de/' %}
    {% assign about_label = 'Ãœber uns' %}
    {% assign events_label = 'Veranstaltungen' %}
    {% assign members_label = 'Mitglied werden' %}
    {% assign contacts_label = 'Kontakt' %}
  {% when 'fr' %}
    {% assign prefix = '/fr/' %}
    {% assign about_label = 'Ã€ propos' %}
    {% assign events_label = 'Ã‰vÃ©nements' %}
    {% assign members_label = 'Devenir membre' %}
    {% assign contacts_label = 'Contacts' %}
  {% when 'it' %}
    {% assign prefix = '/it/' %}
    {% assign about_label = 'Chi siamo' %}
    {% assign events_label = 'Eventi' %}
    {% assign members_label = 'Diventa membro' %}
    {% assign contacts_label = 'Contatti' %}
  {% else %}
    {% assign prefix = '/' %}
    {% assign about_label = 'About us' %}
    {% assign events_label = 'Upcoming Events' %}
    {% assign members_label = 'Join' %}
    {% assign contacts_label = 'Contact' %}
{% endcase %}

<a class="site-title" href="{{ prefix | relative_url }}">
    <img class="logo" src="{{ "/assets/images/logo_ics_security_transparent.png" | relative_url }}"
         alt="ICS Security Switzerland Logo">
</a>

<nav class="site-nav">
  <input type="checkbox" id="nav-trigger" class="nav-trigger">
  <label for="nav-trigger">
    <span class="menu-icon">â˜°</span>
  </label>

  <div class="trigger">
    <a href="{{ prefix }}about/" class="page-link">{{ about_label }}</a>
    <a href="{{ prefix }}events/" class="page-link">{{ events_label }}</a>
    <a href="{{ prefix }}members/"  class="page-link">{{ members_label }}</a>
    <a href="{{ prefix }}contacts/" class="page-link">{{ contacts_label }}</a>

    <!-- language dropdown -->
    <div class="lang-dropdown">
      <button class="lang-btn">
        <span class="lang-btn-flag">
          {% if lang == 'de' %}ðŸ‡©ðŸ‡ª{% elsif lang == 'fr' %}ðŸ‡«ðŸ‡·{% elsif lang == 'it' %}ðŸ‡®ðŸ‡¹{% else %}ðŸ‡¬ðŸ‡§{% endif %}
        </span>
        <span class="lang-btn-chevron">â–¾</span>
      </button>

      <div class="lang-menu">
        {% if lang != "en" %}
        <a href="/" title="English"><span class="flag">ðŸ‡¬ðŸ‡§</span> English</a>
        {% endif %}

        {% if lang != "de" %}
        <a href="/de/" title="Deutsch"><span class="flag">ðŸ‡©ðŸ‡ª</span> Deutsch</a>
        {% endif %}

        {% if lang != "fr" %}
        <a href="/fr/" title="FranÃ§ais"><span class="flag">ðŸ‡«ðŸ‡·</span> FranÃ§ais</a>
        {% endif %}

        {% if lang != "it" %}
        <a href="/it/" title="Italiano"><span class="flag">ðŸ‡®ðŸ‡¹</span> Italiano</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    var dropdown = document.querySelector('.lang-dropdown');
    var btn = dropdown?.querySelector('.lang-btn');
    var menu = dropdown?.querySelector('.lang-menu');

    if (btn && menu) {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        dropdown.classList.toggle('open');
      });

      document.addEventListener('click', function(e) {
        if (!dropdown.contains(e.target)) {
          dropdown.classList.remove('open');
        }
      });
    }
  });
  </script>
  </div>
</nav>
