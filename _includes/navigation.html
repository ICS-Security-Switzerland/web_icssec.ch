
{% assign lang = page.lang | default: 'en' %}
{% case lang %}
  {% when 'de' %}
    {% assign prefix = '/de/' %}
    {% assign about_label = 'Ãœber uns' %}
    {% assign events_label = 'Events' %}
    {% assign members_label = 'Mitglied werden' %}
    {% assign contacts_label = 'Kontakt' %}
  {% when 'fr' %}
    {% assign prefix = '/fr/' %}
    {% assign about_label = 'Ã€ propos' %}
    {% assign events_label = 'Ã‰vÃ©nements' %}
    {% assign members_label = 'Devenir membre' %}
    {% assign contacts_label = 'Contacts' %}
  {% when 'it' %}
    {% assign prefix = '/it/' %}
    {% assign about_label = 'Chi siamo' %}
    {% assign events_label = 'Eventi' %}
    {% assign members_label = 'Diventa membro' %}
    {% assign contacts_label = 'Contatti' %}
  {% else %}
    {% assign prefix = '/' %}
    {% assign about_label = 'About' %}
    {% assign events_label = 'Events' %}
    {% assign members_label = 'Join' %}
    {% assign contacts_label = 'Contact' %}
{% endcase %}

<a class="site-logo" href="{{ prefix | relative_url }}">
  <img src="{{ '/assets/images/logo_ics_security_transparent.png' | relative_url }}"
       alt="ICS Security Switzerland">
</a>

<input type="checkbox" id="nav-toggle" class="nav-toggle">
<label class="nav-toggle-label" for="nav-toggle" aria-label="Toggle navigation">
  <svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</label>

<nav class="site-nav">
  <a href="{{ prefix }}about/" class="nav-link">{{ about_label }}</a>
  <a href="{{ prefix }}events/" class="nav-link">{{ events_label }}</a>
  <a href="{{ prefix }}members/" class="nav-link">{{ members_label }}</a>
  <a href="{{ prefix }}contacts/" class="nav-link">{{ contacts_label }}</a>

  <div class="lang-dropdown">
    <button class="lang-btn" aria-label="Choose language">
      <span class="lang-btn-flag">{% if lang == 'de' %}ðŸ‡©ðŸ‡ª{% elsif lang == 'fr' %}ðŸ‡«ðŸ‡·{% elsif lang == 'it' %}ðŸ‡®ðŸ‡¹{% else %}ðŸ‡¬ðŸ‡§{% endif %}</span>
      <span class="lang-btn-chevron">â–¾</span>
    </button>
    <div class="lang-menu">
      {% if lang != "en" %}<a href="/"><span class="flag">ðŸ‡¬ðŸ‡§</span> English</a>{% endif %}
      {% if lang != "de" %}<a href="/de/"><span class="flag">ðŸ‡©ðŸ‡ª</span> Deutsch</a>{% endif %}
      {% if lang != "fr" %}<a href="/fr/"><span class="flag">ðŸ‡«ðŸ‡·</span> FranÃ§ais</a>{% endif %}
      {% if lang != "it" %}<a href="/it/"><span class="flag">ðŸ‡®ðŸ‡¹</span> Italiano</a>{% endif %}
    </div>
  </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var dropdown = document.querySelector('.lang-dropdown');
  var btn = dropdown && dropdown.querySelector('.lang-btn');
  if (btn) {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      dropdown.classList.toggle('open');
    });
    document.addEventListener('click', function(e) {
      if (!dropdown.contains(e.target)) dropdown.classList.remove('open');
    });
  }
});
</script>
